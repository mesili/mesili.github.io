(this["webpackJsonpcart-coding-test"]=this["webpackJsonpcart-coding-test"]||[]).push([[0],{37:function(e,t,n){e.exports=n(65)},51:function(e,t,n){},54:function(e,t,n){},55:function(e,t,n){},56:function(e,t,n){},57:function(e,t,n){},58:function(e,t,n){},59:function(e,t,n){},60:function(e,t,n){},61:function(e,t,n){},62:function(e,t,n){},63:function(e,t,n){},64:function(e,t,n){},65:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),r=n(12),l=n.n(r),o=n(2),i=n(3),u=n(16),s=n(14),d=n(13),m=n(32),p=n(9),f=n(6),E=function(e,t){return function(n){return n({type:e,payload:t})}},v="product/set",b=function(e){return E(v,e)},h={list:[]},g=n(34),O="cart/add",j="cart/del",N="cart/quantity",y="cart/addCoupon",P="cart/select",k="cart/storeCoupons",x="cart/toggleDrawer",C=function(e){return E(O,e)},I=function(e){return E(j,e)},w=function(e,t){return E(N,{productId:e,quantity:t})},S=function(e){return E(P,e)},q=function(e){return E(y,e)},L=function(e){return E(k,e)},T=function(e){return E(x,e)},D={maxProducts:0,drawer:!1,products:[],selection:[],prices:{initialPrice:0,couponEligiblePrice:0,couponPrice:0,finalPrice:0},coupon:null,availableCoupons:[]},_=function(e,t){var n=e.reduce((function(e,t){return e+t.price*t.quantity}),0),c=e.filter((function(e){return!1!==e.availableCoupon})).reduce((function(e,t){return e+t.price*t.quantity}),0),a=n-c,r=t?function(e,t){var n="rate"===e.type?t*(e.discountRate/100):e.discountAmount;return n>t?t:n}(t,c):0,l=a+(c-r);return{initialPrice:n,couponEligiblePrice:c,couponPrice:Math.floor(r),finalPrice:Math.floor(l)}},R=Object(d.c)({products:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0,n=t.type,c=t.payload,a=Object(p.a)({},v,(function(){return c.sort((function(e,t){return t.score-e.score})),Object(f.a)(Object(f.a)({},e),{},{list:c})}));return a[n]?a[n]():e},cart:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,n=arguments.length>1?arguments[1]:void 0,c=n.type,a=n.payload,r=function(){return null===t.coupon?null:t.availableCoupons[t.coupon]},l=(e={},Object(p.a)(e,O,(function(){var e=t.products,n=t.selection;if(t.maxProducts&&e.length>=t.maxProducts)return t;e.push(a);var c=_(e.filter((function(e){return n.includes(e.id)})),r());return Object(f.a)(Object(f.a)({},t),{},{products:e,prices:c})})),Object(p.a)(e,j,(function(){var e=t.products,n=t.selection,c=e.findIndex((function(e){return e.id===a}));e.splice(c,1);var l=n.indexOf(a);n.splice(l,1);var o=_(e.filter((function(e){return n.includes(e.id)})),r());return Object(f.a)(Object(f.a)({},t),{},{products:e,prices:o})})),Object(p.a)(e,N,(function(){var e=a.productId,n=a.quantity,c=t.products,l=t.selection;if(n>0){var o=c.findIndex((function(t){return t.id===e}));c[o].quantity=n;var i=_(c.filter((function(e){return l.includes(e.id)})),r());return Object(f.a)(Object(f.a)({},t),{},{products:c,prices:i})}return t})),Object(p.a)(e,P,(function(){var e=t.selection.indexOf(a),n=Object(g.a)(t.selection);-1===e?n.push(a):n.splice(e,1);var c=_(t.products.filter((function(e){return n.includes(e.id)})),r());return Object(f.a)(Object(f.a)({},t),{},{selection:n,prices:c})})),Object(p.a)(e,k,(function(){return Object(f.a)(Object(f.a)({},t),{},{availableCoupons:a})})),Object(p.a)(e,y,(function(){var e=t.products,n=t.selection,c=t.availableCoupons,r=_(e.filter((function(e){return n.includes(e.id)})),c[a]);return Object(f.a)(Object(f.a)({},t),{},{prices:r,coupon:a})})),Object(p.a)(e,x,(function(){return Object(f.a)(Object(f.a)({},t),{},{drawer:!t.drawer})})),e);return l[c]?l[c]():t}}),$=d.d,A=[m.a],M=(n(51),function(e){var t=e.children;return(a.a.createElement("div",{id:"main-layout"},a.a.createElement("header",null,a.a.createElement("h2",null,"Shopping Cart"),a.a.createElement("ul",null,a.a.createElement("li",null,a.a.createElement(u.b,{to:"/products"},"Products")),a.a.createElement("li",null,a.a.createElement(u.b,{to:"/cart"},"Cart")))),a.a.createElement("main",null,t),a.a.createElement("footer",null,"Author : ",a.a.createElement("a",{href:"https://sebastien.mesili.fr"},"Sebastien Mesili")," - ",a.a.createElement("a",{href:"https://github.com/mesili/"},"github"))))}),U=[{id:1,title:"Product 1",coverImage:"https://placehold.it/400x400",price:56,score:200},{id:2,title:"Product 2",coverImage:"https://placehold.it/400x400",price:32,score:300},{id:3,title:"Product 3",coverImage:"https://placehold.it/400x400",price:24,score:350},{id:4,title:"Product 4",coverImage:"https://placehold.it/400x400",price:900,score:120,availableCoupon:!1},{id:5,title:"Product 5",coverImage:"https://placehold.it/400x400",price:230,score:640},{id:6,title:"Product 6",coverImage:"https://placehold.it/400x400",price:320,score:200},{id:7,title:"Product 7",coverImage:"https://placehold.it/400x400",price:180,score:190,availableCoupon:!1},{id:8,title:"Product 8",coverImage:"https://placehold.it/400x400",price:123,score:453},{id:9,title:"Product 9",coverImage:"https://placehold.it/400x400",price:345,score:300,availableCoupon:!1},{id:10,title:"Product 10",coverImage:"https://placehold.it/400x400",price:50,score:300},{id:11,title:"Product 11",coverImage:"https://placehold.it/400x400",price:564,score:150},{id:12,title:"Product 12",coverImage:"https://placehold.it/400x400",price:23,score:220}],B=n(26),F=n.n(B),J=n(33),W=n(7),Y=n(35),Q=(n(54),function(e){var t=e.className,n=void 0===t?"":t,c=e.block,r=void 0!==c&&c,l=Object(Y.a)(e,["className","block"]);return(a.a.createElement("button",Object.assign({},l,{className:"button ".concat(n," ").concat(r?"button-block":"")})))}),z=(n(55),function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(W.a,null)," Add to cart")}),G=function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(W.i,null)," Remove")},H=function(e){var t=e.productId,n=Object(o.b)(),c=Object(o.c)((function(e){return e.products})).list,r=Object(o.c)((function(e){return e.cart})),l=r.maxProducts,i=r.products,u=Object(s.useToasts)().addToast,d=i.filter((function(e){return e.id===t})).length>0,m=function(){var e=Object(J.a)(F.a.mark((function e(){var a;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!d){e.next=4;break}return e.abrupt("return",n(I(t)));case 4:if(!(l&&i.length>=l)){e.next=6;break}return e.abrupt("return",u("You can add up to ".concat(l," products to your cart."),{appearance:"error"}));case 6:if(!(a=c.filter((function(e){return e.id===t}))).length){e.next=11;break}return e.next=10,n(C(Object(f.a)(Object(f.a)({},a[0]),{},{quantity:1})));case 10:n(T());case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return a.a.createElement(Q,{className:"add-to-cart ".concat(d?"active":""),onClick:m},d?a.a.createElement(G,null):a.a.createElement(z,null))},K=(n(56),function(e){var t=e.id,n=e.title,c=e.price,r=e.picture;return(a.a.createElement("div",{className:"product-item"},a.a.createElement("div",{className:"picture-container"},a.a.createElement("img",{className:"picture",src:r,alt:"".concat(n," picture")})),a.a.createElement("div",{className:"title"},n),a.a.createElement("div",{className:"bottom"},a.a.createElement("div",{className:"product-actions"},a.a.createElement(H,{productId:t})),a.a.createElement("span",{className:"price"},"$",c.toLocaleString(),"USD"))))}),V=(n(57),function(e){return a.a.createElement("div",Object.assign({className:"info"},e))}),X=(n(58),function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.products})).list,n=Object(o.c)((function(e){return e.cart})).drawer;return t&&t.length?a.a.createElement("div",{className:"product-list",onClick:function(){return n&&e(T())}},t.map((function(e,t){var n=e.id,c=e.title,r=e.coverImage,l=e.price,o=e.score;return(a.a.createElement(K,{id:n,title:c,price:l,score:o,picture:r,key:"productlist_item_".concat(n)}))}))):a.a.createElement(V,null,"No product to display.")}),Z=(n(59),function(){var e=Object(o.c)((function(e){return e.cart})).list;return(a.a.createElement(M,null,a.a.createElement("div",{className:"cart-home"},a.a.createElement("div",{className:"recap"},a.a.createElement("div",{className:"products"},a.a.createElement("h3",null,"Select the products to checkout"),a.a.createElement(ne,{products:e})),a.a.createElement("aside",{className:"total-price"},a.a.createElement(le,null))))))}),ee=function(){var e=Object(o.c)((function(e){return e.cart})).maxProducts;return(a.a.createElement("div",{className:"cart-full"},a.a.createElement(V,null,"You can add up to ",e," to your cart.")))},te=(n(60),function(e){var t=e.value,n=void 0===t?1:t,c=e.onChange;return(a.a.createElement("div",{className:"quantity-button"},a.a.createElement(Q,{className:"minus",onClick:function(){return c(-1)}},a.a.createElement(W.c,null)),a.a.createElement("span",{className:"qty"},n),a.a.createElement(Q,{className:"plus",onClick:function(){return c(1)}},a.a.createElement(W.d,null))))}),ne=(n(61),function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.cart})),n=t.maxProducts,c=t.products,r=t.selection;if(!c||!c.length)return a.a.createElement("div",{className:"empty-cart"},a.a.createElement(V,null,"No product in your cart."));var l=function(t){return e(I(t))};return a.a.createElement("div",{className:"cart-product-list"},c.map((function(t){var n=t.id,c=t.title,o=t.coverImage,i=t.price,u=t.availableCoupon,s=t.quantity;t.onCheck,t.onQuantity;return(a.a.createElement("div",{className:"cart-product",key:"cart_product_".concat(n)},a.a.createElement("div",{className:"checkbox-container"},a.a.createElement("input",{type:"checkbox",onChange:function(){return e(S(n))},checked:-1!==r.indexOf(n)})),a.a.createElement("div",{className:"picture"},a.a.createElement("img",{src:o,alt:"".concat(c," picture")})),a.a.createElement("div",{className:"description"},a.a.createElement("div",{className:"title"},c),a.a.createElement("div",{className:"remove"},a.a.createElement(Q,{onClick:l},a.a.createElement(W.i,null)," Remove")),a.a.createElement("div",{className:"price"},"$",parseInt(i).toLocaleString(),"USD",!1===u?a.a.createElement("span",null,"No coupon"):"")),a.a.createElement("div",{className:"quantity"},a.a.createElement(te,{value:s,onChange:function(t){return c=n,(a=s+t)>0&&e(w(c,a));var c,a}}))))})),n&&c.length>=n?a.a.createElement(ee,null):"")}),ce=(n(62),function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.cart})),n=t.drawer,r=t.list;return Object(c.useEffect)((function(){n?document.querySelector("body").classList.add("no-scroll"):document.querySelector("body").classList.remove("no-scroll")}),[n]),a.a.createElement("div",{className:"cart-drawer ".concat(n?"pulled":"")},a.a.createElement("div",{className:"inner"},a.a.createElement("div",{className:"products"},a.a.createElement("h3",null,"Select the  products to checkout"),a.a.createElement(ne,{products:r})),a.a.createElement(le,null)),a.a.createElement("div",{className:"puller",onClick:function(){return e(T())}},a.a.createElement(W.f,null)))}),ae=[{type:"rate",title:"-10%",discountRate:10},{type:"amount",title:"-10",discountAmount:10}],re=(n(63),function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.cart})),n=t.prices,r=t.coupon,l=t.availableCoupons,i=function(t){return e(q(t))};return Object(c.useEffect)((function(){e(L(ae))}),[e]),0===n.couponEligiblePrice?null:l?a.a.createElement("ul",{className:"coupon-selector"},l.map((function(e,t){e.type;var n=e.title;e.discountRate;return(a.a.createElement("li",{key:"coupon_idx_".concat(t)},a.a.createElement("button",{className:r===t?"active":"",onClick:function(){return i(t)}},r===t?a.a.createElement(W.b,null):a.a.createElement(W.g,null),a.a.createElement(W.h,null),n)))})),a.a.createElement("li",null,a.a.createElement("button",{className:null===r?"active":"",onClick:function(){return i(null)}},null===r?a.a.createElement(W.b,null):a.a.createElement(W.g,null),a.a.createElement(W.h,null),"No coupon"))):null}),le=(n(64),function(){var e=Object(o.c)((function(e){return e.cart})),t=e.prices,n=e.products,c=Object(s.useToasts)().addToast,r=t.initialPrice,l=t.couponPrice,i=t.finalPrice;return a.a.createElement("div",{className:"cart-price"},a.a.createElement("h3",null,"Checkout prices"),a.a.createElement("dl",null,a.a.createElement("dt",null,"Initial price"),a.a.createElement("dd",null,"$",r.toLocaleString(),"USD")),a.a.createElement(re,null),l>0&&a.a.createElement("dl",null,a.a.createElement("dt",null,"Coupon discounts"),a.a.createElement("dd",null,a.a.createElement("b",null,"-",l.toLocaleString()))),a.a.createElement("dl",{className:"total"},a.a.createElement("dt",null,"Total price"),a.a.createElement("dd",null,"$",i.toLocaleString(),"USD")),n&&n.length?a.a.createElement(Q,{block:!0,className:"checkout-button",onClick:function(){return c("The demo stops here :-)",{appearance:"info"})}},a.a.createElement(W.e,null)," Proceed to payment"):"")}),oe=function(){var e=Object(o.b)();return Object(c.useEffect)((function(){e(b(U))}),[e]),a.a.createElement(M,null,a.a.createElement(ce,null),a.a.createElement(X,null))},ie=function(){return a.a.createElement(o.a,{store:(e={},Object(d.e)(R,e,$(d.a.apply(void 0,A))))},a.a.createElement(s.ToastProvider,{placement:"top-center",autoDismiss:3e3},a.a.createElement(u.a,null,a.a.createElement(i.d,null,a.a.createElement(i.b,{path:"/products",component:oe}),a.a.createElement(i.b,{path:"/cart",component:Z}),a.a.createElement(i.b,{path:"/",component:function(){return a.a.createElement(i.a,{to:"/products"})}})))));var e};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(ie,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[37,1,2]]]);
//# sourceMappingURL=main.d12dc13e.chunk.js.map